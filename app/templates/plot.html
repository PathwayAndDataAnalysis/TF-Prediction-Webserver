{% extends "layout.html" %}

{% block title %}Plot{% endblock %}

{% block content %}

    <div class="flex grid grid-cols-3 gap-4">
        <div class="flex col-span-2 border border-gray-300 rounded-md box-border" id="scatterPlot"></div>

        <div class="" id="plotSettings">
            <h3 class="text-2xl font-semibold mb-4">Plot Settings</h3>
            <div>
                <label for="plot_type">Plot Type:</label>
                <select name="plot_type" id="plot_type">
                    <option value="umap" selected>UMAP</option>
                    <option value="pca">Top 2 PCA Comp.</option>
                </select>
            </div>

            <h3>TF Analysis Settings</h3>
            <div>
                <label for="tf_name">Transcription Factor:</label>
                <select name="tf_name" id="tf_name">
                </select>
            </div>

            <br/>

            <div id="sort_tfs_div">
                <label for="sort_tfs">Sort TFs:</label>
                <select name="sort_tfs" id="sort_tfs">
                    <option value="sort_alphabetically" selected>Alphabetically</option>
                    <option value="sort_significance">Significance Cell Count</option>
                </select>
            </div>

            <br/>

            <div id="select_meta_data_cluster">
                <label for="meta_data_cluster">Select Meta Data Cluster:</label>
                <select name="meta_data_cluster" id="meta_data_cluster">
                </select>
            </div>

            <div>
                <form id="plotForm">
                    <input type="hidden" id="session_id" value="{{ session_id }}">
                    <button type="button" onclick="updatePlot()" class="my_button">Update Plot</button>
                </form>
            </div>

            <div id="plot_info" style="display: none;">
                <p>Note: Active - Red and Inactive - Blue</p>

                <div>
                    <input type="checkbox" id="hide_insignificant" name="hide_insignificant">
                    <label for="hide_insignificant">Hide Insignificant Cells</label>
                </div>

                <div>
                    <input type="checkbox" id="hide_active" name="hide_active">
                    <label for="hide_active">Hide Active Cells</label>
                </div>

                <div>
                    <input type="checkbox" id="hide_inactive" name="hide_inactive">
                    <label for="hide_inactive">Hide Inactive Cells</label>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

{% endblock %}

